Project requirements

Overview
- Split-pane web app with a code editor on the left and an interactive task graph on the right.
- The editor defines tasks using a lightweight script syntax that is parsed into graph nodes.
- Keep this document updated whenever project behavior or UI changes.
- Optional config header precedes tasks and defines board name, states, people, and tag metadata.
- Board name from the header is shown in the left-pane title.
- Board name from the header also updates the HTML document title.

Editor
- Fixed-width font with line numbers and syntax highlighting for tasks, subtasks, tags, people, and references.
- Indentation with Tab (indent) and Shift+Tab (unindent); Enter maintains current indentation.
- Undo/redo supported by the native textarea.
- Inline context suggestions for #tags, @people, and {task references}, navigable with arrows and accepted with Enter/Tab.
- Suggestions also appear for !state tags, matching known kanban states.

Task syntax
- A task starts with "* Task name" on its own line.
- Subtasks are indented by 4 spaces and use the same "*" syntax.
- Task descriptions follow task lines until a blank line; tags and people can appear anywhere inline in the description.
- Tags use #tag, people use @person, and references use {Task name}.
- Kanban state tags use !state (first !tag per task is used for the kanban column; additional !tags are invalid and shown with a wavy underline in the editor).
- Markdown in descriptions supports bold, italic, underline, highlight, lists, tables, images, and links.

Formatting syntax examples
- Bold: **bold**
- Italic: *italic*
- Underline: __underline__
- Highlight: ==highlight==
- List item: - item
- Checkbox: - [x] checked
- Table:
  | Col | Val |
  | --- | --- |
  | A | 1 |
- Image: ![alt](url)
- Link: [title](https://example.com)
- Task reference: {Task name}

Graph
- Right pane renders tasks and subtasks as a tree, connected by bezier lines.
- Nodes display the task title and render description markdown with inline pills for tags/people.
- Nodes can be collapsed/expanded; focus centers the selected task with animation.
- Pan and zoom supported on the graph canvas.
- A kanban board appears above the graph showing tasks grouped by their !state tags (states are generated dynamically).
- Kanban columns follow the header state order first, followed by any dynamically detected states.
- The kanban board and graph are separated by a draggable horizontal divider.
- Drag tasks from the graph or between kanban columns to update the task !state in the editor.
- Drag a state pill out of a task to clear its !state.

Tags & People
- Legend lists all tags and people; clicking toggles highlight filters.
- Clicking a tag/person pill in a node toggles the corresponding legend filter.
- When filters are active, non-matching tasks are dimmed and matching inline pills highlight.
- Drag legend tags/people onto task cards to add them, and drag pills out of a task to remove them (updates the code).

Search
- Search input filters/highlights tasks by name, description, tags, or people with toggleable scope options.
- Search highlights matching tasks in the kanban board.

Config header
- Header format (before first task):
  Board name:
      states:
          todo
          inprogress:
              name: In progress
              color: gray
      people:
          bob:
              name: Bob Dilan
              color: #FF00BB
          jesica
          fero
- Header-defined states/people/tags keep their order in the legend/kanban and define pill colors.
- Dynamically detected states/people/tags are appended after the header-defined order so new items still appear.

Misc
- Clear Highlights resets all tag/person filters and search input.
- Clicking a task node focuses the corresponding editor line; moving the cursor in the editor updates focus in the graph.
